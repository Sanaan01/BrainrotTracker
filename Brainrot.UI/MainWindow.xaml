<Window
    x:Class="Brainrot.UI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="using:Brainrot.UI"
    mc:Ignorable="d"
    Title="Brainrot Tracker">

    <Grid x:Name="TitleBarHost">
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#F6F9FF" Offset="0" />
                <GradientStop Color="#EEF2FF" Offset="1" />
            </LinearGradientBrush>
        </Grid.Background>

        <ScrollViewer Padding="24" VerticalScrollBarVisibility="Auto">
            <StackPanel Spacing="16">
                <StackPanel Spacing="4">
                    <TextBlock Text="Brainrot Tracker"
                               FontSize="28"
                               FontWeight="SemiBold" />
                    <TextBlock Text="Monitor your digital wellbeing and app usage"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                </StackPanel>

                <!-- Top grid: summary, brain health, quick categorize -->
                <Grid ColumnSpacing="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2.2*" />
                        <ColumnDefinition Width="3*" />
                        <ColumnDefinition Width="2*" />
                    </Grid.ColumnDefinitions>

                    <!-- Summary cards -->
                    <StackPanel Spacing="10">
                        <Border Background="#FFFFFF" Padding="16" CornerRadius="16" BorderBrush="#E7EBF2" BorderThickness="1">
                            <StackPanel Spacing="4">
                                <TextBlock Text="Total Active Time" FontWeight="SemiBold" />
                                <TextBlock x:Name="TotalTimeText"
                                           Text="0m 00s"
                                           FontSize="22"
                                           FontWeight="SemiBold" />
                                <TextBlock Text="Focus, rot, and neutral combined" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                            </StackPanel>
                        </Border>

                        <Grid ColumnSpacing="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <Border Background="#F1F8FF" CornerRadius="14" Padding="12" BorderBrush="#D5E7FF" BorderThickness="1">
                                <StackPanel>
                                    <TextBlock Text="Focus Time" FontWeight="SemiBold" />
                                    <TextBlock x:Name="FocusText" Text="0m 00s" FontSize="20" FontWeight="SemiBold" />
                                    <TextBlock Text="Getting things done" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                </StackPanel>
                            </Border>

                            <Border Grid.Column="1" Background="#FFF6F2" CornerRadius="14" Padding="12" BorderBrush="#FFE0D5" BorderThickness="1">
                                <StackPanel>
                                    <TextBlock Text="Rot Time" FontWeight="SemiBold" />
                                    <TextBlock x:Name="RotText" Text="0m 00s" FontSize="20" FontWeight="SemiBold" />
                                    <TextBlock Text="Distractions &amp; doomscroll" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                </StackPanel>
                            </Border>
                        </Grid>

                        <Border Background="#FEFFF6" CornerRadius="14" Padding="12" BorderBrush="#EEF1D2" BorderThickness="1">
                            <StackPanel>
                                <TextBlock Text="Neutral Time" FontWeight="SemiBold" />
                                <TextBlock x:Name="NeutralText" Text="0m 00s" FontSize="20" FontWeight="SemiBold" />
                                <TextBlock Text="Meetings, idle, misc." FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- Brain health card -->
                    <Border Grid.Column="1" Background="#FFFFFF" Padding="20" CornerRadius="16" BorderBrush="#E7EBF2" BorderThickness="1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Width="140" HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
                                <Ellipse Width="120" Height="120" Fill="#F7F9FF" Stroke="#E7ECFF" StrokeThickness="2" />
                                <TextBlock x:Name="EmojiText" Text="ðŸ’€" FontSize="28" HorizontalAlignment="Center" />
                            </StackPanel>

                            <StackPanel Grid.Column="1" Spacing="8" VerticalAlignment="Center">
                                <TextBlock Text="Brain Health" FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                <TextBlock x:Name="BrainStateText" Text="Full brainrot" FontSize="26" FontWeight="SemiBold" />
                                <TextBlock x:Name="FocusVsRotLabel" Text="0% focus" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                                <ProgressBar x:Name="FocusVsRotBar"
                                             Minimum="0"
                                             Maximum="100"
                                             Value="0"
                                             Height="10"
                                             CornerRadius="8" />
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Quick categorize -->
                    <Border Grid.Column="2" Background="#FFFFFF" Padding="18" CornerRadius="16" BorderBrush="#E7EBF2" BorderThickness="1">
                        <StackPanel Spacing="12">
                            <TextBlock Text="Quick Categorize" FontSize="18" FontWeight="SemiBold" />
                            <TextBlock Text="Drop in a process name and tag it so the tracker stays accurate." FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />

                            <TextBox x:Name="AppNameInput"
                                     PlaceholderText="e.g. chrome"
                                     Header="Process name"
                                     Margin="0,4,0,0" />

                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <Button Content="Add to Rot"
                                        Style="{StaticResource AccentButtonStyle}"
                                        Click="AddToRot_Click" />
                                <Button Content="Add to Focus"
                                        Click="AddToFocus_Click" />
                                <Button Content="Neutral"
                                        Click="AddToNeutral_Click" />
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Lower grid: categories + per app list -->
                <Grid ColumnSpacing="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2.5*" />
                        <ColumnDefinition Width="3.5*" />
                    </Grid.ColumnDefinitions>

                    <Border Background="#FFFFFF" Padding="18" CornerRadius="16" BorderBrush="#E7EBF2" BorderThickness="1">
                        <StackPanel Spacing="12">
                            <TextBlock Text="Category breakdown" FontSize="18" FontWeight="SemiBold" />
                            <TextBlock Text="Manage the lists that define your rot, focus, and neutral apps." FontSize="12" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />

                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>

                                <!-- Rot list -->
                                <StackPanel Spacing="6">
                                    <TextBlock Text="Rot apps" FontWeight="SemiBold" />
                                    <ItemsControl x:Name="RotAppsList">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="#FFF2EE"
                                                        BorderBrush="#FFDDD2"
                                                        BorderThickness="1"
                                                        CornerRadius="8"
                                                        Padding="10,6"
                                                        Margin="0,0,0,6">
                                                    <TextBlock Text="{Binding}" />
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>

                                <!-- Focus list -->
                                <StackPanel Grid.Column="1" Spacing="6">
                                    <TextBlock Text="Focus apps" FontWeight="SemiBold" />
                                    <ItemsControl x:Name="FocusAppsList">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="#E7F8EE"
                                                        BorderBrush="#CFEADC"
                                                        BorderThickness="1"
                                                        CornerRadius="8"
                                                        Padding="10,6"
                                                        Margin="0,0,0,6">
                                                    <TextBlock Text="{Binding}" />
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>

                                <!-- Neutral list -->
                                <StackPanel Grid.Column="2" Spacing="6">
                                    <TextBlock Text="Neutral apps" FontWeight="SemiBold" />
                                    <ItemsControl x:Name="NeutralAppsList">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border Background="#FFF8E7"
                                                        BorderBrush="#F3E7C8"
                                                        BorderThickness="1"
                                                        CornerRadius="8"
                                                        Padding="10,6"
                                                        Margin="0,0,0,6">
                                                    <TextBlock Text="{Binding}" />
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <Border Grid.Column="1" Background="#FFFFFF" Padding="18" CornerRadius="16" BorderBrush="#E7EBF2" BorderThickness="1">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <TextBlock Text="Per-app usage" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,8" />

                            <ListView x:Name="AppsList"
                                      Grid.Row="1"
                                      BorderThickness="0"
                                      SelectionMode="None">
                                <ListView.Header>
                                    <Grid Padding="6,2">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="2*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="App" FontWeight="SemiBold" />
                                        <TextBlock Grid.Column="1" Text="Duration" FontWeight="SemiBold" />
                                        <TextBlock Grid.Column="2" Text="Category" FontWeight="SemiBold" />
                                    </Grid>
                                </ListView.Header>

                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Padding="6,10">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="2*" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Text="{Binding AppName}" />
                                            <TextBlock Grid.Column="1" Text="{Binding Duration}" />
                                            <TextBlock Grid.Column="2" Text="{Binding Category}" />
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </Grid>
                    </Border>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
